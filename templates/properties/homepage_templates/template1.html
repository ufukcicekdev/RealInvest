{% load static %}
<!-- Template 1: Large Banner -->

<!-- Debug information -->
<!--
Banner images count: {{ banner_images.count }}
Banner images exists: {{ banner_images.exists }}
{% for banner in banner_images.all %}
Banner {{ forloop.counter }}: {{ banner.image.url }}
{% endfor %}
-->

<div class="homepage-template template1">
  <!-- Hero Section with Large Banner -->
  <section class="hero-section">
      {% if banner_images.exists %}
      <div id="bannerCarousel1" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
          <div class="carousel-inner">
              {% for banner in banner_images.all %}
              <div class="carousel-item {% if forloop.first %}active{% endif %}">
                  <img src="{{ banner.image.url }}" class="d-block w-100 hero-carousel-image" alt="{{ banner.alt_text|default:'Banner image' }}">
                  <div class="hero-content">
                      {% if banner.button_text %}
                      <a href="{{ banner.button_link }}" class="btn btn-banner {{ banner.button_position }}">
                          {{ banner.button_text }}
                      </a>
                      {% endif %}
                  </div>
              </div>
              {% endfor %}
          </div>
          {% if banner_images.count > 1 %}
          <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel1" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel1" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
          </button>
          <div class="carousel-indicators">
              {% for banner in banner_images.all %}
              <button type="button" data-bs-target="#bannerCarousel1" data-bs-slide-to="{{ forloop.counter0 }}" 
                      {% if forloop.first %}class="active"{% endif %} aria-current="true" aria-label="Slide {{ forloop.counter }}"></button>
              {% endfor %}
          </div>
          {% endif %}
      </div>
      {% endif %}
  </section>

  {% if about.show_search_bar %}
  <!-- Search Bar -->
  <section class="search-section">
      <form method="get" action="{% url 'listings' %}" class="row g-3">
          <div class="col-md-4">
              <input type="text" name="search" class="form-control" placeholder="Konum veya başlık ile ara...">
          </div>
          <div class="col-md-3">
              <div class="dropdown-container">
                  <div class="dropdown-selected">Tüm Gayrimenkul Tipleri</div>
                  <ul class="dropdown-options">
                      <li data-value="">Tüm Gayrimenkul Tipleri</li>
                      <li data-value="apartment">Daire</li>
                      <li data-value="house">Ev</li>
                      <li data-value="villa">Villa</li>
                      <li data-value="land">Arsa</li>
                      <li data-value="commercial">Ticari</li>
                      <li data-value="office">Ofis</li>
                  </ul>
                  <input type="hidden" name="type" id="type">
              </div>
          </div>
          <div class="col-md-3">
              <div class="dropdown-container">
                  <div class="dropdown-selected">Tüm Durumlar</div>
                  <ul class="dropdown-options">
                      <li data-value="">Tüm Durumlar</li>
                      <li data-value="sale">Satılık</li>
                      <li data-value="rent">Kiralık</li>
                  </ul>
                  <input type="hidden" name="status" id="status">
              </div>
          </div>
          <div class="col-md-2">
              <button type="submit" class="btn btn-primary w-100">
                  <i class="bi bi-search"></i> Ara
              </button>
          </div>
      </form>
  </section>
  {% endif %}

  {% if about.show_stats_section %}
  <!-- Stats Section -->
  <section class="stats-section">
      <div class="container">
          <div class="row g-4">
              <div class="col-md-3 col-6">
                  <div class="stat-item">
                      <span class="number">500+</span>
                      <span class="label">Gayrimenkul</span>
                  </div>
              </div>
              <div class="col-md-3 col-6">
                  <div class="stat-item">
                      <span class="number">50+</span>
                      <span class="label">Memnun Müşteri</span>
                  </div>
              </div>
              <div class="col-md-3 col-6">
                  <div class="stat-item">
                      <span class="number">15+</span>
                      <span class="label">Yıllık Tecrübe</span>
                  </div>
              </div>
              <div class="col-md-3 col-6">
                  <div class="stat-item">
                      <span class="number">24/7</span>
                      <span class="label">Destek</span>
                  </div>
              </div>
          </div>
      </div>
  </section>
  {% endif %}

  {% if about.show_featured_listings and featured_listings %}
  <!-- Featured Listings -->
  <section class="featured-section py-5">
      <div class="container">
          <div class="section-heading">
              <h2>Öne Çıkan Gayrimenkuller</h2>
              <p>Sizin için özenle seçilmiş premium gayrimenkuller</p>
          </div>
          <div class="row g-4">
              {% for listing in featured_listings %}
              <div class="col-md-6 col-lg-4">
                  <div class="card property-card h-100">
                      <div class="position-relative">
                          {% if listing.main_image %}
                          <img src="{{ listing.main_image.url }}" class="card-img-top" alt="{{ listing.image_alt_text }}">
                          {% else %}
                          <img src="{% static 'images/placeholder.jpg' %}" class="card-img-top" alt="Property placeholder">
                          {% endif %}
                          <span class="badge bg-primary position-absolute top-0 start-0 m-3">{{ listing.get_status_display }}</span>
                          <span class="badge bg-dark position-absolute top-0 end-0 m-3">{{ listing.get_property_type_display }}</span>
                      </div>
                      <div class="card-body">
                          <h5 class="card-title">{{ listing.title }}</h5>
                          <p class="text-muted mb-2">
                              <i class="bi bi-geo-alt"></i> {{ listing.location }}
                          </p>
                          <p class="card-text text-truncate">{{ listing.description|truncatewords:15 }}</p>
                          <div class="d-flex justify-content-between align-items-center mb-3">
                              <span class="text-muted"><i class="bi bi-house"></i> {{ listing.bedrooms }} oda</span>
                              <span class="text-muted"><i class="bi bi-droplet"></i> {{ listing.bathrooms }} banyo</span>
                              <span class="text-muted"><i class="bi bi-arrows-fullscreen"></i> {{ listing.area }} m²</span>
                          </div>
                          <div class="d-flex justify-content-between align-items-center">
                              <h4 class="price mb-0">₺{{ listing.price|floatformat:0 }}</h4>
                              <a href="{% url 'listing_detail' listing.slug %}" class="btn btn-outline-primary btn-sm">Detayları Gör</a>
                          </div>
                      </div>
                  </div>
              </div>
              {% endfor %}
          </div>
          <div class="text-center mt-5">
              <a href="{% url 'listings' %}" class="btn btn-primary btn-lg">Tüm İlanları Görüntüle</a>
          </div>
      </div>
  </section>
  {% endif %}

  <!-- Hakkımızda section has been removed from here and will be handled as a custom section -->

  {% if about.show_features_section %}
  <!-- Why Choose Us -->
  <section class="features-section">
      <div class="container">
          <div class="section-heading">
              <h2>Neden Bizi Seçmelisiniz</h2>
              <p>Güvenebileceğiniz profesyonel emlak hizmetleri</p>
          </div>
          <div class="row g-4">
              <div class="col-md-4">
                  <div class="feature-card">
                      <div class="feature-icon">
                          <i class="bi bi-house-check"></i>
                      </div>
                      <h5>Geniş Seçenek</h5>
                      <p>Seçim yapabileceğiniz geniş gayrimenkul portföyü</p>
                  </div>
              </div>
              <div class="col-md-4">
                  <div class="feature-card">
                      <div class="feature-icon">
                          <i class="bi bi-shield-check"></i>
                      </div>
                      <h5>Güvenilir Hizmet</h5>
                      <p>Emlak sektöründe yıllarca deneyim</p>
                  </div>
              </div>
              <div class="col-md-4">
                  <div class="feature-card">
                      <div class="feature-icon">
                          <i class="bi bi-headset"></i>
                      </div>
                      <h5>7/24 Destek</h5>
                      <p>Hayalinizdeki evi bulmanıza yardımcı olmak için her zaman buradayız</p>
                  </div>
              </div>
          </div>
      </div>
  </section>
  {% endif %}

  {% if about.show_testimonials %}
  <!-- Testimonials Section -->
  <section class="testimonials-section">
      <div class="container">
          <div class="section-heading text-white">
              <h2>Müşteri Yorumları</h2>
              <p>Memnun müşterilerimizden gelen geri bildirimler</p>
          </div>
          <div class="row g-4">
              <div class="col-md-6">
                  <div class="testimonial-card">
                      <p class="quote">
                          "Emlak ekibi sayesinde hayalimdeki eve kavuldum. Profesyonel yaklaşımı ve detaylı danışmanlığı gerçekten takdire şayan."
                      </p>
                      <div class="client">
                          <img src="{% static 'images/placeholder.jpg' %}" alt="Müşteri">
                          <div class="client-info">
                              <h6>Ahmet Yılmaz</h6>
                              <p class="mb-0">İstanbul</p>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="col-md-6">
                  <div class="testimonial-card">
                      <p class="quote">
                          "Yatırım amaçlı aradığım gayrimenkulu çok hızlı ve uygun fiyata buldum. Her zaman için güvenilir ve profesyonel bir hizmet."
                      </p>
                      <div class="client">
                          <img src="{% static 'images/placeholder.jpg' %}" alt="Müşteri">
                          <div class="client-info">
                              <h6>Mehmet Demir</h6>
                              <p class="mb-0">Ankara</p>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </section>
  {% endif %}

  {% if about.show_contact_info %}
  <!-- Contact Info Section -->
  <section class="contact-info-section">
      <div class="container">
          <div class="row text-center g-4">
              <div class="col-md-4">
                  <div class="info-box">
                      <i class="bi bi-telephone-fill"></i>
                      <h5>Bizi Arayın</h5>
                      {% if global_site_settings and global_site_settings.phone %}
                      <p class="mb-0">{{ global_site_settings.phone }}</p>
                      {% else %}
                      <p class="mb-0">+90 212 123 45 67</p>
                      {% endif %}
                  </div>
              </div>
              <div class="col-md-4">
                  <div class="info-box">
                      <i class="bi bi-envelope-fill"></i>
                      <h5>E-posta Gönderin</h5>
                      {% if global_site_settings and global_site_settings.email %}
                      <p class="mb-0">{{ global_site_settings.email }}</p>
                      {% else %}
                      <p class="mb-0">info@emlak.com</p>
                      {% endif %}
                  </div>
              </div>
              <div class="col-md-4">
                  <div class="info-box">
                      <i class="bi bi-geo-alt-fill"></i>
                      <h5>Bizi Ziyaret Edin</h5>
                      {% if global_site_settings and global_site_settings.address %}
                      <p class="mb-0">{{ global_site_settings.address }}</p>
                      {% else %}
                      <p class="mb-0">Örnek Mahallesi, Emlak Cad. No:123</p>
                      {% endif %}
                  </div>
              </div>
          </div>
      </div>
  </section>
  {% endif %}

  {% if about.show_social_media %}
  <!-- Social Media -->
  <section class="social-section">
      <div class="container text-center">
          <div class="section-heading">
              <h2>Bizi Takip Edin</h2>
              <p>Sosyal medya hesaplarımızdan güncel ilanlardan haberdar olun</p>
          </div>
          <div class="social-links">
              <a href="#" target="_blank" aria-label="Facebook">
                  <i class="bi bi-facebook"></i>
              </a>
              <a href="#" target="_blank" aria-label="Instagram">
                  <i class="bi bi-instagram"></i>
              </a>
              <a href="#" target="_blank" aria-label="Twitter">
                  <i class="bi bi-twitter"></i>
              </a>
              <a href="#" target="_blank" aria-label="LinkedIn">
                  <i class="bi bi-linkedin"></i>
              </a>
          </div>
      </div>
  </section>
  {% endif %}

  {% if about.show_recent_listings %}
  <!-- Recent Listings -->
  <section class="recent-section py-5 bg-light">
      <div class="container">
          <div class="section-heading">
              <h2>Son Eklenen Gayrimenkuller</h2>
              <p>Koleksiyonumuza yeni eklenenler</p>
          </div>
          <div class="row g-4">
              {% for listing in recent_listings %}
              <div class="col-md-6 col-lg-3">
                  <div class="card property-card h-100">
                      <div class="position-relative">
                          {% if listing.main_image %}
                          <img src="{{ listing.main_image.url }}" class="card-img-top" alt="{{ listing.image_alt_text }}">
                          {% else %}
                          <img src="{% static 'images/placeholder.jpg' %}" class="card-img-top" alt="Property placeholder">
                          {% endif %}
                          <span class="badge bg-primary position-absolute top-0 start-0 m-2">{{ listing.get_status_display }}</span>
                      </div>
                      <div class="card-body">
                          <h6 class="card-title">{{ listing.title|truncatewords:5 }}</h6>
                          <p class="text-muted small mb-2">
                              <i class="bi bi-geo-alt"></i> {{ listing.location }}
                          </p>
                          <h5 class="price mb-2">₺{{ listing.price|floatformat:0 }}</h5>
                          <a href="{% url 'listing_detail' listing.slug %}" class="btn btn-sm btn-outline-primary w-100">İncele</a>
                      </div>
                  </div>
              </div>
              {% empty %}
              <div class="col-12 text-center">
                  <p class="text-muted">Şu anda müsait gayrimenkul bulunmamaktadır.</p>
              </div>
              {% endfor %}
          </div>
          <div class="text-center mt-4">
              <a href="{% url 'listings' %}" class="btn btn-primary">Tüm Gayrimenkulleri Görüntüle</a>
          </div>
      </div>
  </section>
  {% endif %}
</div>