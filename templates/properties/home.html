{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-image"></div>
    <div class="hero-content">
        <h1>Hayalinizdeki Evi Bulmanın En Kolay Yolu</h1>
        <p>Premium gayrimenkul koleksiyonumuzdan mükemmel evi keşfedin. Yatırımlarınız için en iyi fırsatları sunuyoruz.</p>
        <a href="{% url 'listings' %}" class="btn btn-hero">Hemen İlanları İncele</a>
    </div>
</section>

<!-- Search Bar -->
<section class="search-section">
    <form method="get" action="{% url 'listings' %}" class="row g-3">
        <div class="col-md-4">
            <input type="text" name="search" class="form-control" placeholder="Konum veya başlık ile ara...">
        </div>
        <div class="col-md-3">
            <div class="dropdown-container">
                <div class="dropdown-selected">Tüm Gayrimenkul Tipleri</div>
                <ul class="dropdown-options">
                    <li data-value="">Tüm Gayrimenkul Tipleri</li>
                    <li data-value="apartment">Daire</li>
                    <li data-value="house">Ev</li>
                    <li data-value="villa">Villa</li>
                    <li data-value="land">Arsa</li>
                    <li data-value="commercial">Ticari</li>
                    <li data-value="office">Ofis</li>
                </ul>
                <input type="hidden" name="type" id="type">
            </div>
        </div>
        <div class="col-md-3">
            <div class="dropdown-container">
                <div class="dropdown-selected">Tüm Durumlar</div>
                <ul class="dropdown-options">
                    <li data-value="">Tüm Durumlar</li>
                    <li data-value="sale">Satılık</li>
                    <li data-value="rent">Kiralık</li>
                </ul>
                <input type="hidden" name="status" id="status">
            </div>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">
                <i class="bi bi-search"></i> Ara
            </button>
        </div>
    </form>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <span class="number">500+</span>
                    <span class="label">Gayrimenkul</span>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <span class="number">50+</span>
                    <span class="label">Memnun Müşteri</span>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <span class="number">15+</span>
                    <span class="label">Yıllık Tecrübe</span>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-item">
                    <span class="number">24/7</span>
                    <span class="label">Destek</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Listings -->
{% if featured_listings %}
<section class="featured-section py-5">
    <div class="container">
        <div class="section-heading">
            <h2>Öne Çıkan Gayrimenkuller</h2>
            <p>Sizin için özenle seçilmiş premium gayrimenkuller</p>
        </div>
        <div class="row g-4">
            {% for listing in featured_listings %}
            <div class="col-md-6 col-lg-4">
                <div class="card property-card h-100">
                    <div class="position-relative">
                        {% if listing.main_image %}
                        <img src="{{ listing.main_image.url }}" class="card-img-top" alt="{{ listing.image_alt_text }}">
                        {% else %}
                        <img src="{% static 'images/placeholder.jpg' %}" class="card-img-top" alt="Property placeholder">
                        {% endif %}
                        <span class="badge bg-primary position-absolute top-0 start-0 m-3">{{ listing.get_status_display }}</span>
                        <span class="badge bg-dark position-absolute top-0 end-0 m-3">{{ listing.get_property_type_display }}</span>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">{{ listing.title }}</h5>
                        <p class="text-muted mb-2">
                            <i class="bi bi-geo-alt"></i> {{ listing.location }}
                        </p>
                        <p class="card-text text-truncate">{{ listing.description|truncatewords:15 }}</p>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span class="text-muted"><i class="bi bi-house"></i> {{ listing.bedrooms }} oda</span>
                            <span class="text-muted"><i class="bi bi-droplet"></i> {{ listing.bathrooms }} banyo</span>
                            <span class="text-muted"><i class="bi bi-arrows-fullscreen"></i> {{ listing.area }} m²</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <h4 class="price mb-0">₺{{ listing.price|floatformat:0 }}</h4>
                            <a href="{% url 'listing_detail' listing.slug %}" class="btn btn-outline-primary btn-sm">Detayları Gör</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5">
            <a href="{% url 'listings' %}" class="btn btn-primary btn-lg">Tüm İlanları Görüntüle</a>
        </div>
    </div>
</section>
{% endif %}

<!-- Main About Section -->
{% if about %}
<section class="about-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <div class="about-image">
                    {% if about.main_image %}
                    <img src="{{ about.main_image.url }}" class="img-fluid" alt="{{ about.image_alt_text }}">
                    {% else %}
                    <img src="{% static 'images/placeholder.jpg' %}" class="img-fluid" alt="About us">
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6">
                <div class="about-content">
                    <h2>{{ about.title }}</h2>
                    {% if about.subtitle %}
                    <h5 class="text-primary mb-4">{{ about.subtitle }}</h5>
                    {% endif %}
                    <div class="about-text mb-4">
                        {{ about.content|linebreaks }}
                    </div>
                    <a href="{% url 'contact' %}" class="btn btn-primary">İletişime Geçin</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Mission and Vision -->
{% if about.mission or about.vision %}
<section class="mission-vision-section py-5 bg-light">
    <div class="container">
        <div class="row g-4">
            {% if about.mission %}
            <div class="col-md-6">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="icon-box mb-3">
                            <i class="bi bi-bullseye fs-1 text-primary"></i>
                        </div>
                        <h3 class="fw-bold mb-3">Misyonumuz</h3>
                        <p class="text-muted">{{ about.mission|linebreaks }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
            
            {% if about.vision %}
            <div class="col-md-6">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4">
                        <div class="icon-box mb-3">
                            <i class="bi bi-eye fs-1 text-primary"></i>
                        </div>
                        <h3 class="fw-bold mb-3">Vizyonumuz</h3>
                        <p class="text-muted">{{ about.vision|linebreaks }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}
{% else %}
<!-- Fallback Content if About is not configured -->
<section class="about-fallback py-5">
    <div class="container text-center">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <i class="bi bi-info-circle fs-1 text-primary mb-4"></i>
                <h2 class="fw-bold mb-3">Hakkımızda</h2>
                <p class="lead text-muted mb-4">
                    Mükemmel gayrimenkul bulmanıza yardımcı olan önde gelen bir emlak şirketiyiz. 
                    Yıllarca deneyim ve mükemmelliğe bağlılıkla kapsamlı emlak çözümleri sunuyoruz.
                </p>
                <a href="{% url 'contact' %}" class="btn btn-primary">İletişime Geçin</a>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Why Choose Us -->
<section class="features-section">
    <div class="container">
        <div class="section-heading">
            <h2>Neden Bizi Seçmelisiniz</h2>
            <p>Güvenebileceğiniz profesyonel emlak hizmetleri</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-house-check"></i>
                    </div>
                    <h5>Geniş Seçenek</h5>
                    <p>Seçim yapabileceğiniz geniş gayrimenkul portföyü</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h5>Güvenilir Hizmet</h5>
                    <p>Emlak sektöründe yıllarca deneyim</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-headset"></i>
                    </div>
                    <h5>7/24 Destek</h5>
                    <p>Hayalinizdeki evi bulmanıza yardımcı olmak için her zaman buradayız</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section">
    <div class="container">
        <div class="section-heading text-white">
            <h2>Müşteri Yorumları</h2>
            <p>Memnun müşterilerimizden gelen geri bildirimler</p>
        </div>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="testimonial-card">
                    <p class="quote">
                        "Emlak ekibi sayesinde hayalimdeki eve kavuldum. Profesyonel yaklaşımı ve detaylı danışmanlığı gerçekten takdire şayan."
                    </p>
                    <div class="client">
                        <img src="{% static 'images/placeholder.jpg' %}" alt="Müşteri">
                        <div class="client-info">
                            <h6>Ahmet Yılmaz</h6>
                            <p>İstanbul</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="testimonial-card">
                    <p class="quote">
                        "Yatırım amaçlı aradığım gayrimenkulu çok hızlı ve uygun fiyata buldum. Her zaman için güvenilir ve profesyonel bir hizmet."
                    </p>
                    <div class="client">
                        <img src="{% static 'images/placeholder.jpg' %}" alt="Müşteri">
                        <div class="client-info">
                            <h6>Mehmet Demir</h6>
                            <p>Ankara</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Info Section -->
{% if about.phone or about.email or about.address %}
<section class="contact-info-section">
    <div class="container">
        <div class="row text-center g-4">
            {% if about.phone %}
            <div class="col-md-4">
                <div class="info-box">
                    <i class="bi bi-telephone-fill"></i>
                    <h5>Bizi Arayın</h5>
                    <p class="mb-0">{{ about.phone }}</p>
                </div>
            </div>
            {% endif %}
            
            {% if about.email %}
            <div class="col-md-4">
                <div class="info-box">
                    <i class="bi bi-envelope-fill"></i>
                    <h5>E-posta Gönderin</h5>
                    <p class="mb-0">{{ about.email }}</p>
                </div>
            </div>
            {% endif %}
            
            {% if about.address %}
            <div class="col-md-4">
                <div class="info-box">
                    <i class="bi bi-geo-alt-fill"></i>
                    <h5>Bizi Ziyaret Edin</h5>
                    <p class="mb-0">{{ about.address }}</p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- Social Media -->
{% if about.facebook_url or about.instagram_url or about.twitter_url or about.linkedin_url %}
<section class="social-section">
    <div class="container text-center">
        <div class="section-heading">
            <h2>Bizi Takip Edin</h2>
            <p>Sosyal medya hesaplarımızdan güncel ilanlardan haberdar olun</p>
        </div>
        <div class="social-links">
            {% if about.facebook_url %}
            <a href="{{ about.facebook_url }}" target="_blank" aria-label="Facebook">
                <i class="bi bi-facebook"></i>
            </a>
            {% endif %}
            {% if about.instagram_url %}
            <a href="{{ about.instagram_url }}" target="_blank" aria-label="Instagram">
                <i class="bi bi-instagram"></i>
            </a>
            {% endif %}
            {% if about.twitter_url %}
            <a href="{{ about.twitter_url }}" target="_blank" aria-label="Twitter">
                <i class="bi bi-twitter"></i>
            </a>
            {% endif %}
            {% if about.linkedin_url %}
            <a href="{{ about.linkedin_url }}" target="_blank" aria-label="LinkedIn">
                <i class="bi bi-linkedin"></i>
            </a>
            {% endif %}
        </div>
    </div>
</section>
{% endif %}

<!-- Recent Listings -->
<section class="recent-section py-5 bg-light">
    <div class="container">
        <div class="section-heading">
            <h2>Son Eklenen Gayrimenkuller</h2>
            <p>Koleksiyonumuza yeni eklenenler</p>
        </div>
        <div class="row g-4">
            {% for listing in recent_listings %}
            <div class="col-md-6 col-lg-3">
                <div class="card property-card h-100">
                    <div class="position-relative">
                        {% if listing.main_image %}
                        <img src="{{ listing.main_image.url }}" class="card-img-top" alt="{{ listing.image_alt_text }}">
                        {% else %}
                        <img src="{% static 'images/placeholder.jpg' %}" class="card-img-top" alt="Property placeholder">
                        {% endif %}
                        <span class="badge bg-primary position-absolute top-0 start-0 m-2">{{ listing.get_status_display }}</span>
                    </div>
                    <div class="card-body">
                        <h6 class="card-title">{{ listing.title|truncatewords:5 }}</h6>
                        <p class="text-muted small mb-2">
                            <i class="bi bi-geo-alt"></i> {{ listing.location }}
                        </p>
                        <h5 class="price mb-2">₺{{ listing.price|floatformat:0 }}</h5>
                        <a href="{% url 'listing_detail' listing.slug %}" class="btn btn-sm btn-outline-primary w-100">İncele</a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center">
                <p class="text-muted">Şu anda müsait gayrimenkul bulunmamaktadır.</p>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-4">
            <a href="{% url 'listings' %}" class="btn btn-primary">Tüm Gayrimenkulleri Görüntüle</a>
        </div>
    </div>
</section>

<!-- JSON-LD Structured Data for Home Page -->
{% block structured_data %}
{{ block.super }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "RealEstate",
  "url": "{{ request.scheme }}://{{ request.get_host }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ request.scheme }}://{{ request.get_host }}{% url 'listings' %}?search={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
{% if about %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "RealEstate",
  "description": "{{ about.content|truncatewords:30 }}",
  "url": "{{ request.scheme }}://{{ request.get_host }}",
  {% if about.phone %}"telephone": "{{ about.phone }}",{% endif %}
  {% if about.email %}"email": "{{ about.email }}",{% endif %}
  {% if about.address %}"address": "{{ about.address }}",{% endif %}
  "sameAs": [
    {% if about.facebook_url %}"{{ about.facebook_url }}"{% endif %}
    {% if about.instagram_url %}{% if about.facebook_url %},{% endif %}"{{ about.instagram_url }}"{% endif %}
    {% if about.twitter_url %}{% if about.facebook_url or about.instagram_url %},{% endif %}"{{ about.twitter_url }}"{% endif %}
    {% if about.linkedin_url %}{% if about.facebook_url or about.instagram_url or about.twitter_url %},{% endif %}"{{ about.linkedin_url }}"{% endif %}
  ]
}
</script>

{% endif %}
{% endblock %}

{% endblock %}

